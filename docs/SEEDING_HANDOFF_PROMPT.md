# Handoff Prompt: Seeding Firestore

This document provides a handoff prompt for seeding the Firestore database with the converted legacy data.

## Objective

To seed the Firestore database with the data generated by the conversion scripts.

## Context

The conversion and seeding tools have been audited and normalized. All legacy data has been converted to the new schema and is ready to be seeded into Firestore. The canonical bundle lives at `backend-sandbox/seeds/gameDataCatalogs.v3.normalized.json` (the same payload generated in `tools/out/` after running `npm run tools:normalize-v3`). Older seed artifacts now live under `backend-sandbox/seeds/archive/`.

For a detailed summary of the changes made to the tools and the commands to rerun the entire process, please refer to the [**Audit of Tools Runtime**](./AUDIT_TOOLS_RUNTIME.md) document.

For the complete deployment process, including the seeding commands, please refer to the [**Sandbox Deployment Guide**](./SANDBOX_DEPLOY.md).

## Instructions

To seed the Firestore database, run the following commands from the `backend-sandbox` directory:

```bash
# Refresh the normalized bundle (writes tools/out/... and seeds/gameDataCatalogs.v3.normalized.json)
npm run tools:normalize-v3

# Optional sanity check (catalog invariants + loader path verifier)
npm run tools:validate-v3

# Seed all catalogs into the non-suffixed documents listed in FIRESTORE_SCHEMA.md
GOOGLE_APPLICATION_CREDENTIALS="/absolute/path/to/service-account.json" npm run tools:seed-firestore
```

## Legacy Seed Artifacts

Per-catalog JSON files still exist under `backend-sandbox/seeds/archive/legacy-catalogs/` (for example `v3/ItemsCatalog.json`). These were produced by the earlier SKU-migration tooling and are preserved for historical reference only. All current seeding flows, including the commands above, read from the consolidated payload in `backend-sandbox/seeds/gameDataCatalogs.v3.normalized.json`. Leave the legacy copies untouched; no active scripts depend on them today.
